(this.webpackJsonppart5=this.webpackJsonppart5||[]).push([[0],{50:function(e,t,n){e.exports=n(79)},55:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n(0),o=n.n(a),c=n(21),u=n.n(c),i=(n(55),n(2)),l=n.n(i),s=n(3),d=n(11),p=n.n(d),f="/api/blogs",m=null,b={getAll:function(){return p.a.get(f).then((function(e){return e.data}))},setToken:function(e){m="bearer ".concat(e)},create:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{authorization:m}},e.next=3,p.a.post(f,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{authorization:m}},e.next=3,p.a.put("".concat(f,"/").concat(t),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{authorization:m}},e.next=3,p.a.delete("".concat(f,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateComments:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:m}},a={content:n,id:t},e.next=4,p.a.post("".concat(f,"/").concat(t,"/comments"),a,r);case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},g=n(22),v=function(e,t){var n=Object(a.useState)(""),r=Object(g.a)(n,2),o=r[0],c=r[1],u=function(e){c(e.target.value)};return{type:e,placeholder:t,value:o,onChange:u,reset:function(){c("")},excludeReset:{type:e,placeholder:t,value:o,onChange:u}}},h=n(6),E=Object(h.b)((function(e){return{message:e.notification,error:e.error}}))((function(e){var t=e.error,n=e.message;return n?o.a.createElement("div",{className:t?"error":"success"},n):null})),y=function(e,t){var n=2e3*t;return function(){var t=Object(s.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,setTimeout((function(){r({type:"RESET"})}),n);case 2:r({type:"NEW_NOTIFICATION",notification:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_NOTIFICATION":return t.notification;case"RESET":return null;default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return!0;case"CLEAR":return!1;default:return e}},O={login:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":return t.data.user;case"REMOVE_USER":return null;case"LOG":return t.data.user;default:return e}},j={addNotification:y,flagError:function(){return{type:"ERROR"}},clearError:function(){return{type:"CLEAR"}},logUserIn:function(e,t){return function(){var n=Object(s.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.login({username:e.value,password:t.value});case 2:a=n.sent,window.localStorage.setItem("loggedBloglistUser",JSON.stringify(a)),b.setToken(a.token),r({type:"LOG",data:{user:a}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},R=Object(h.b)((function(e){return{notification:e.notification,error:e.error}}),j)((function(e){var t=e.addNotification,n=e.flagError,r=e.clearError,a=e.error,c=e.logUserIn,u=v("text","username"),i=v("password","password"),d=function(){var e=Object(s.a)(l.a.mark((function e(o){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(){u.reset(),i.reset()};try{o.preventDefault(),c(u,i),s(),a&&r()}catch(l){n(),t("Invalid username or password!",2)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement("h2",null,"Login to the Application"),o.a.createElement(E,{error:a}),o.a.createElement("form",{onSubmit:d},o.a.createElement("div",null,o.a.createElement("input",u.excludeReset),o.a.createElement("input",i.excludeReset)),o.a.createElement("button",{type:"submit"},"Login")))})),I=n(14),C=n(47),N=(n(77),[{Header:"Name",accessor:"name"},{Header:"Username",accessor:"username",Cell:function(e){return o.a.createElement("span",{className:"number"},e.value)}},{Header:"Blogs Listed",accessor:"blogs"}]),B=Object(h.b)((function(e){return{users:e.users}}),null)((function(e){var t=[];return e.users.forEach((function(e){t.push({name:o.a.createElement(I.b,{to:"/users/".concat(e.id)},e.name),username:e.username,blogs:e.blogs.length})})),o.a.createElement("div",null,o.a.createElement("h2",null,"Users"),o.a.createElement(C.a,{data:t,columns:N}))})),S=function(e){var t=e.user,n=t.blogs.length,r=t.name.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ");return o.a.createElement("div",null,o.a.createElement("h1",null," ",r),n?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Blogs added"),o.a.createElement("ul",null,t.blogs.map((function(e){return o.a.createElement("li",{key:e.id},e.title)})))):o.a.createElement("h3",null,r," has not added any blogs"))},L=n(15);function U(){var e=Object(r.a)(["\n  background-color: #9ea3a0;\n  height: 3rem;\n  margin: 15px;\n  padding: 20px;\n  border-radius: 10px;\n  box-shadow: 7px 7px 2px 1px #858285;\n\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(19rem, 1fr));\n  grid-gap: 1rem;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n\n  a {\n    padding: 50px;\n    font-size: 1.3rem;\n    text-decoration: none;\n    color: #191a1a;\n    font-weight: bold;\n    background: inherit;\n  }\n\n  a:hover {\n    text-decoration: none;\n    color: white;\n    background: inherit;\n  }\n\n  ul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    background-color: #333;\n  }\n\n  li {\n    float: left;\n  }\n\n  li a {\n    display: block;\n    color: white;\n    text-align: center;\n    padding: 14px 16px;\n    text-decoration: none;\n  }\n\n  .active {\n    background-color: #4caf50;\n  }\n\n  li a:hover {\n    background-color: #111;\n  }\n"]);return U=function(){return e},e}var T=L.b.div(U()),A=Object(h.b)((function(e){return{blogs:e.blogs,user:e.user}}),null)((function(e){var t={padding:5};return o.a.createElement(T,null,o.a.createElement("div",null,o.a.createElement(I.b,{style:t,to:"/blogs"},"Blogs"),o.a.createElement(I.b,{style:t,to:"/users"},"Users"),"- ",o.a.createElement("strong",null,e.user.name.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" "))," logged in"," ",o.a.createElement("button",{type:"submit",onClick:e.handleLogout},"Logout"))," ")})),_=n(44);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var P=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.remove(e);case 2:n({type:"REMOVE",data:{id:e}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=function(e){var t=e.id,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(_.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{likes:e.likes+1});return function(){var e=Object(s.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.update(t,n);case 2:a=e.sent,r({type:"LIKE",data:{returnedBlog:a}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data.sort((function(e,t){return t.likes-e.likes}));case"LIKE":var n=t.data.returnedBlog,r=n.id;return e.map((function(e){return e.id===r?n:e})).sort((function(e,t){return t.likes-e.likes}));case"REMOVE":return e.filter((function(e){return e.id!==t.data.id})).sort((function(e,t){return t.likes-e.likes}));case"NEW_BLOG":var a=t.data.returnedBlog;return e.concat(a).sort((function(e,t){return t.likes-e.likes}));case"NEW_COMMENT":var o=t.data.blog,c=e.find((function(e){return e.id===o}));return console.log({updatedBlog:c}),e.map((function(e){return e.id===c.id?c:e})).sort((function(e,t){return t.likes-e.likes}));default:return e.sort((function(e,t){return t.likes-e.likes}))}},F=o.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),r=Object(g.a)(n,2),c=r[0],u=r[1],i={display:c?"none":""},l={display:c?"":"none"},s=function(){u(!c)};return Object(a.useImperativeHandle)(t,(function(){return s})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:i},o.a.createElement("button",{onClick:s},e.buttonLabel)),o.a.createElement("div",{style:l},e.children,o.a.createElement("button",{onClick:s},"Cancel")))})),W={addNotification:y,addBlog:function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.create(e);case 2:r=t.sent,n({type:"NEW_BLOG",data:{returnedBlog:r}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},G=Object(h.b)((function(e){return console.log(e),{notification:e.notification}}),W)((function(e){var t=e.addNotification,n=e.addBlog,r=v("text","title"),a=v("text","author"),c=v("url","url"),u=function(){var e=Object(s.a)(l.a.mark((function e(o){var u,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=function(){r.reset(),a.reset(),c.reset()};try{o.preventDefault(),i={title:r.value,author:a.value,url:c.value},n(i),t("A new blog ".concat(r.value," by ").concat(a.value," was added!"),2),u()}catch(l){console.log(l)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,null),o.a.createElement("form",{onSubmit:u},o.a.createElement("div",null,o.a.createElement("input",r.excludeReset)),o.a.createElement("div",null,o.a.createElement("input",a.excludeReset)),o.a.createElement("div",null,o.a.createElement("input",c.excludeReset)),o.a.createElement("button",{type:"submit"},"Create")))}));function H(){var e=Object(r.a)(["\n  list-style-type: none;\n  margin: 10px;\n  padding: 15px;\n\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(19rem, 1fr));\n  grid-gap: 1rem;\n"]);return H=function(){return e},e}function J(){var e=Object(r.a)(["\n  text-decoration: none;\n\n  &:hover {\n    transform: translateY(-10px);\n  }\n\n  &:focus,\n  &:hover,\n  &:visited,\n  &:link,\n  &:active {\n    text-decoration: none;\n  }\n  display: list-item;\n  border-radius: 3px;\n  padding: 0.5rem 0;\n  margin: 0.5rem 1rem;\n  width: 11rem;\n  background: transparent;\n  color: black;\n\n  background: url(https://andyhooke.co.uk/wp-content/uploads/2018/02/yellow-brushstroke.png);\n  background-repeat: no-repeat;\n  background-size: 100% 95%;\n  padding: 8px 0;\n"]);return J=function(){return e},e}var V=Object(L.b)(I.b)(J()),K=L.b.ul(H()),Y={addLike:M,removeBlog:P},q=Object(h.b)((function(e){return{blogs:e.blogs,users:e.users}}),Y)((function(e){var t=o.a.createRef();return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Blogs"),o.a.createElement(F,{buttonLabel:"New Blog",ref:t},o.a.createElement(G,{blogs:e.blogs})),o.a.createElement(K,null,e.blogs.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(V,{to:"/blogs/".concat(e.id)},'"',e.title,'" by ',o.a.createElement("em",null,e.author)))}))))})),Q=Object(h.b)(null,{addComment:function(e,t){return function(){var n=Object(s.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.updateComments(e.id,t);case 2:a=n.sent,console.log({returnedComment:a}),r({type:"NEW_COMMENT",data:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=v("text","add comment"),n=function(){var n=Object(s.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=function(){t.reset()};try{r.preventDefault(),e.addComment(e.blog,t.value),a()}catch(o){console.log(o)}case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:n},o.a.createElement("input",t.excludeReset),o.a.createElement("button",{type:"submit"},"Add Comment")))})),X={addLike:M,removeBlog:P},Z=Object(h.b)((function(e){return{user:e.user}}),X)((function(e){var t=e.match,n=e.removeBlog,r=e.user,a=e.addLike,c=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Remove blog ".concat(t.title," by ").concat(t.author," ?"))&&n(t.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement("h1",null,t.title," by ",o.a.createElement("em",null,t.author)),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},"Read Post"),o.a.createElement("br",null),"Popularity: ",t.likes," likes"," ",o.a.createElement("button",{onClick:function(){return a(t)}},"Like"),o.a.createElement("br",null)," ","Post added here by: ",t.user.name,o.a.createElement("br",null),t.user&&r.name===t.user.name&&o.a.createElement("button",{onClick:c},"Remove")),o.a.createElement("h2",null,"Comments"),o.a.createElement(Q,{blog:t}),t.comments&&o.a.createElement("ul",null,t.comments.map((function(e){return o.a.createElement("li",{key:e.id},e.content)})))))}));function $(){var e=Object(r.a)(["\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  text-align: center;\n  font-size: 1.5rem;\n  background-color: #999da8;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(19rem, 1fr));\n  grid-gap: 1rem;\n"]);return $=function(){return e},e}var ee=L.b.div($()),te=function(){return o.a.createElement(ee,null,o.a.createElement("p",null,"Created by ",o.a.createElement("em",null,"Joel Hassan")," \xa9 2019"))},ne={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getById:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},ae=n(17),oe={initializeBlogs:function(){return function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addLike:M,removeBlog:P,initUser:function(){return function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=window.localStorage.getItem("loggedBloglistUser"))&&(r=JSON.parse(n),b.setToken(r.token),t({type:"INIT_USER",data:{user:r}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},removeUser:function(){return{type:"REMOVE_USER"}},initializeUsers:function(){return function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ce=Object(h.b)((function(e){return{blogs:e.blogs,user:e.user,users:e.users}}),oe)((function(e){Object(a.useEffect)((function(){e.initializeBlogs(),e.initUser(),e.initializeUsers()}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,null,e.user&&o.a.createElement(A,{logout:function(){b.setToken(null),window.localStorage.removeItem("loggedBloglistUser"),e.removeUser()}}),o.a.createElement(ae.b,{exact:!0,path:"/",render:function(){return e.user?o.a.createElement(q,null):o.a.createElement(R,null)}}),o.a.createElement(ae.b,{exact:!0,path:"/users",render:function(){return o.a.createElement(B,null)}}),o.a.createElement(ae.b,{exact:!0,path:"/login",render:function(){return o.a.createElement(R,null)}}),o.a.createElement(ae.b,{exact:!0,path:"/blogs",render:function(){return o.a.createElement(ae.a,{to:"/"})}}),o.a.createElement(ae.b,{exact:!0,path:"/users/:id",render:function(t){var n,r=t.match,a=(n=r.params.id,e.users.find((function(e){return e.id===n})));return a?o.a.createElement(S,{user:a}):o.a.createElement(ae.a,{to:"/users"})}}),o.a.createElement(ae.b,{exact:!0,path:"/blogs/:id",render:function(t){var n,r=t.match,a=(n=r.params.id,e.blogs.find((function(e){return e.id===n})));return a?o.a.createElement(Z,{match:a}):o.a.createElement(ae.a,{to:"/blogs"})}})),o.a.createElement(te,null))})),ue=n(19),ie=n(45),le=n(46),se=Object(ue.combineReducers)({blogs:D,notification:w,error:x,user:k,users:re}),de=Object(ue.createStore)(se,Object(le.composeWithDevTools)(Object(ue.applyMiddleware)(ie.a)));function pe(){var e=Object(r.a)(["\n  body {\n    @import url('https://fonts.googleapis.com/css?family=Roboto');\n    font-family: 'Roboto', sans-serif;\n    font-size: 1.5em;\n    background-color: #c2c7c1;\n\n\n\n    /* Adapt the colors based on primary prop */\n    button {\n      // background: ",";\n      background: #737572;\n      color: ",";\n  \n      font-size: 1em;\n      margin: 1em;\n      padding: 0.25em 1em;\n      border: 2px solid grey;\n      border-radius: 5px;\n    }\n\n    strong {\n      font-weight: bold;\n    }\n\n  }\n"]);return pe=function(){return e},e}var fe=Object(L.a)(pe(),(function(e){return e.primary?"black":"white"}),(function(e){return e.primary?"white":"#102605"})),me=function(){return u.a.render(o.a.createElement(h.a,{store:de},o.a.createElement(fe,null),o.a.createElement(ce,null)),document.getElementById("root"))};me(),de.subscribe(me)}},[[50,1,2]]]);
//# sourceMappingURL=main.37345ab4.chunk.js.map